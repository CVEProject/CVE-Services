[![Gitter](https://badges.gitter.im/cve-awg/community.svg)](https://gitter.im/cve-awg/community?utm_source=badge&utm_medium=badge&utm_campaign=pr-badge)

# CVE-API

## Table of contents

-   [Technologies](#technologies)
-   [Style Guidelines](#style-guidelines)
-   [Directory Layout](#directory-layout)
-   [Setup](#setup)
-   [API Documentation](#api-documentation)
-   [Unit Testing](#unit-testing)

## Technologies

This project uses or depends on software from

-   NodeJS https://nodejs.org/
-   Express https://github.com/expressjs
-   TypeORM https://typeorm.io/#/
-   TypeScript https://www.typescriptlang.org/
-   Graphql https://graphql.org/
-   TypeGraphql https://typegraphql.ml/

## Style Guidelines

This project uses the following Style Guidelines

-   https://github.com/standard/standard

## Directory layout

#### Top Level Directory

    .
    ├── src                     # Source files (This is where the API resides)
    ├── test                    # Automated tests (This is where the API tests reside)
    ├── prettierrc              # Addon for linter setup
    ├── LICENSE
    ├── README.md
    └── tsconfig                # Config file for typescript

#### Src Directory

    .
    ├── ...
    ├── src                     # Source files (This is where the API resides)
    │   ├── config              # Contains config file for MySQL DB and PM2 configuration
    │   ├── database            # TypeORM and Graphql files can be found here
    │   ├── constants           # Contains constant variables used throughout the application
    │   ├── routes              # This is where routes get created.
    │   └── index               # Where everything begins.
    └── ...

## Setup

#### Step 1. Install required node modules

```sh
    cd cve-id-allocation-service-prototype
    npm install
```

#### Step 2. Setup MySQL.

    See https://dev.mysql.com/doc/mysql-getting-started/en/

#### Step 3. Edit the src/config/config.json file to suite your requirements

    This config file is used to config variables for MySQL
    See src/config/example-config.json Example

#### Step 4. Create a .env file in the root folder

    This env file contains important variables needed.
    See .env-example for an example

#### Step 5. Create database and tables

Start the MySQL database

```sh
sudo /etc/init.d/mysql start
```

#### Step 6. Start the node application

In order to start a dev enviorment:

```sh
    npm run start:dev
```

## Unit Testing

This project uses the following for unit testing

-   https://jestjs.io

In order to run unit tests, use the following command:

```sh
npm run test
```

## GraphQL

You can open the GraphQL playground by going to localhost:3000/playground
